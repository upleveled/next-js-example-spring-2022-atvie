"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getLeftJoinTablesFromParsed = void 0;
function getLeftJoinTablesFromParsed(parsedQuery) {
    var _a;
    const tables = [];
    if (parsedQuery.stmts === undefined) {
        return [];
    }
    for (const stmt of parsedQuery.stmts) {
        if (((_a = stmt.stmt.SelectStmt) === null || _a === void 0 ? void 0 : _a.fromClause) === undefined) {
            return [];
        }
        for (const fromClause of stmt.stmt.SelectStmt.fromClause) {
            if (fromClause.JoinExpr) {
                tables.push(...recursiveGetJoinExpr(fromClause.JoinExpr, []));
            }
        }
    }
    return tables;
}
exports.getLeftJoinTablesFromParsed = getLeftJoinTablesFromParsed;
function recursiveGetJoinExpr(joinExpr, tables) {
    var _a;
    const newTables = joinExpr.jointype === "JOIN_LEFT" ? [...tables, joinExpr.rarg.RangeVar.relname] : tables;
    if (((_a = joinExpr.larg) === null || _a === void 0 ? void 0 : _a.JoinExpr) !== undefined) {
        return recursiveGetJoinExpr(joinExpr.larg.JoinExpr, newTables);
    }
    return newTables;
}
//# sourceMappingURL=getLeftJoinTables.js.map